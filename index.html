<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge, chrome=1" />
        <title>Radiation</title>
        <link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" type="text/css">
        <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="https://netdna.bootstrapcdn.com/bootswatch/2.1.1/spacelab/bootstrap.min.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="peglet.js"></script>
        <script src="mutagen.js"></script>
        <script src="mutagen_grammar.js"></script>
   </head> <body>
    <div class="container-fluid">
    <section id="description">
    <div class="row">
        <div class="span9 offset1"><h3>Radiation, a mutagen.</h3>
            <p class="intro">In genetics, a mutagen (Latin, literally origin of change) is a physical or chemical agent that changes the genetic material, usually DNA, of an organism and thus increases the frequency of mutations above the natural background level. As many mutations cause cancer, mutagens are therefore also likely to be carcinogens. Not all mutations are caused by mutagens: so-called "spontaneous mutations" occur due to spontaneous hydrolysis, errors in DNA replication, repair and recombination.</p>
        </div>
    </div>
     <div class="row">
        <div class="span4 offset1">   <p>Enter thou thy blasted grammar.</p>
            <br />
            <input type="text"></input>
            <br />
            <br />
            <p id="charCount"></p>
            <p id="original"></p>
            <p id="reversed"></p>
            blah blah
        </div>
    </div>
     <div class="row">
         <div class="span4 offset1">  
        </div>
    </div>
    </section>
    </div>
         <script type="text/javascript">
                console.log("mandarin");
            window.onload = function(){
                console.log("avocado");
                function reverseString(string){
                    return string.split("").reverse().join("");
                };
                function set(element, text){
                    console.log('exploding walrus inside set');
                    while (element.firstChild){
                        element.removeChild(element.firstChild);
                    element.appendChild(document.createTextNode(text))}
                };
                function setupUpdater(){

                    console.log('cats are snorting lines of catnip');
                    var input    = document.getElementsByTagName('input')[0],
                        reversed = document.getElementById('reversed'),
                        count    = document.getElementById('charCount'),
                        orig     = document.getElementById('original'),
                        oldText  = input.value,
                        timeout  = null;

                    function handleChange(){
                        var newText = input.value;
                        if (newText == oldText){
                            return;
                        }
                        else {
                            oldText = newText;
                        }
                        console.log('deep fried falafels');
                        set(reversed, reverseString(newText));
                        set(count, 'you wrote ' + newText.length + ' characters. ');
                        set(orig, newText);
                    };
                    function eventHandler(){

                        console.log('rhubarb cheesecake');
                        if(timeout) clearTimeout(timeout);
                        timeout = setTimeout(handleChange, 50);
                    };
                    input.onkeydown = input.onkeyup = input.onclick = eventHandler;
                };
                setupUpdater();
                document.getElementsByTagName("input")[0].focus();
            };
                console.log("blanket");
        </script>
    </body>
</html>
